#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "libcontext.h"
#define N 100

struct sem_s* mutex, vide , plein;

struct objet_t {
	int mytab[100];
};

void consommateur(void *arg);
void producteur(void *arg);

void produire_objet(struct objet_t);
void retirer_objet(struct objet_t);
void mettre_objet(struct objet_t);
void utiliser_objet(struct objet_t);

void consommateur(void);

int main()
{
	sem_init(&mutex,1);
	sem_init(&vide,N);
	sem_init(&plein,0);

	create_ctx(16384, producteur, NULL);
	create_ctx(16384, consommateur, NULL);

	exit(EXIT_SUCCESS);
}



void producteur(void)
{
struct objet_t objet;

while(1){
	produire_objet(&objet);
	sem_down(&vide);
	sem_down(&mutex);
	mettre_objet(&objet);
	sem_up(&vide);
	sem_up(&mutex);
	}

}

void consommateur(void)
{
	objet_t objet;
while(1){
	sem_down(&vide);
	sem_down(&mutex);
	retirer_objet(&objet);
	sem_up(&vide);
	sem_up(&mutex);
	utiliser_objet(objet);
	}
}

void mettre_objet(&objet){};
void produire_objet(&objet){};
void retirer_objet(&objet){};

